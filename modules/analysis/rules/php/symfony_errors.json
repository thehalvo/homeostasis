{
  "name": "Symfony Error Rules",
  "description": "Rules for detecting and fixing Symfony framework errors",
  "version": "0.1.0",
  "rules": [
    {
      "id": "symfony_container_exception",
      "pattern": "Symfony\\\\Component\\\\DependencyInjection\\\\Exception\\\\ServiceNotFoundException.*You have requested a non-existent service \"([^\"]+)\"",
      "type": "ServiceNotFoundException",
      "description": "Attempted to access a service that doesn't exist in the container",
      "root_cause": "symfony_missing_service",
      "suggestion": "Check service name for typos. Ensure the service is properly registered in your service configuration. Verify autowiring is enabled if relying on it.",
      "confidence": "high",
      "severity": "high",
      "category": "dependency-injection",
      "framework": "symfony"
    },
    {
      "id": "symfony_template_error",
      "pattern": "Twig\\\\Error\\\\(Runtime|Syntax|Loader)Error.*?(.*?)(?:in \"([^\"]+)\" at line (\\d+))?",
      "type": "TwigError",
      "description": "Error in Twig template",
      "root_cause": "symfony_template_error",
      "suggestion": "Check the template syntax. Ensure variables used in the template are properly passed from the controller. Verify template file exists at the specified path.",
      "confidence": "high",
      "severity": "medium",
      "category": "template",
      "framework": "symfony"
    },
    {
      "id": "symfony_form_validation",
      "pattern": "Symfony\\\\Component\\\\Form\\\\Exception\\\\(TransformationFailed|InvalidArgumentException)",
      "type": "FormException",
      "description": "Form handling or validation error",
      "root_cause": "symfony_form_error",
      "suggestion": "Verify form type constraints and data transformers. Ensure input matches expected format. Add form validation groups if needed.",
      "confidence": "high",
      "severity": "medium",
      "category": "form",
      "framework": "symfony"
    },
    {
      "id": "symfony_route_not_found",
      "pattern": "Symfony\\\\Component\\\\Routing\\\\Exception\\\\RouteNotFoundException.*Route (.*) not found",
      "type": "RouteNotFoundException",
      "description": "Referenced a non-existent route",
      "root_cause": "symfony_route_not_found",
      "suggestion": "Check route name for typos. Ensure the route is defined in your routing configuration. Use the 'debug:router' command to list available routes.",
      "confidence": "high",
      "severity": "medium",
      "category": "routing",
      "framework": "symfony"
    },
    {
      "id": "symfony_controller_not_found",
      "pattern": "Symfony\\\\Component\\\\HttpKernel\\\\Exception\\\\NotFoundHttpException.*No route found for \"([^\"]+)\"",
      "type": "NotFoundHttpException",
      "description": "No route matched the requested URL",
      "root_cause": "symfony_controller_not_found",
      "suggestion": "Check your routing configuration. Ensure the route path and method are correctly defined. Verify that controller exists and is properly configured.",
      "confidence": "high",
      "severity": "medium",
      "category": "routing",
      "framework": "symfony"
    },
    {
      "id": "symfony_method_not_allowed",
      "pattern": "Symfony\\\\Component\\\\HttpKernel\\\\Exception\\\\MethodNotAllowedHttpException",
      "type": "MethodNotAllowedHttpException",
      "description": "HTTP method not allowed for the given route",
      "root_cause": "symfony_method_not_allowed",
      "suggestion": "Ensure the HTTP method (GET, POST, etc.) matches the route configuration. Check allowed methods in your routing configuration.",
      "confidence": "high",
      "severity": "medium",
      "category": "routing",
      "framework": "symfony"
    },
    {
      "id": "symfony_yaml_parse_error",
      "pattern": "Symfony\\\\Component\\\\Yaml\\\\Exception\\\\ParseException.*Unable to parse",
      "type": "ParseException",
      "description": "Invalid YAML file syntax",
      "root_cause": "symfony_yaml_parse_error",
      "suggestion": "Check YAML file syntax. Ensure proper indentation and structure. Consider using a YAML validator to identify syntax errors.",
      "confidence": "high",
      "severity": "high",
      "category": "configuration",
      "framework": "symfony"
    },
    {
      "id": "symfony_annotation_error",
      "pattern": "Doctrine\\\\Common\\\\Annotations\\\\AnnotationException",
      "type": "AnnotationException",
      "description": "Error in Doctrine annotations",
      "root_cause": "symfony_annotation_error",
      "suggestion": "Check annotation syntax. Ensure all required use statements are present. Verify annotation keys and values follow the correct format.",
      "confidence": "high",
      "severity": "high",
      "category": "configuration",
      "framework": "symfony"
    },
    {
      "id": "symfony_doctrine_entity_error",
      "pattern": "Doctrine\\\\ORM\\\\Mapping\\\\MappingException",
      "type": "MappingException",
      "description": "Error in Doctrine entity mapping",
      "root_cause": "symfony_doctrine_mapping_error",
      "suggestion": "Check entity annotations or YAML/XML mapping. Ensure entity class and property names match database structure. Run Doctrine validation commands to identify mapping issues.",
      "confidence": "high",
      "severity": "high",
      "category": "database",
      "framework": "symfony"
    },
    {
      "id": "symfony_doctrine_dbal_error",
      "pattern": "Doctrine\\\\DBAL\\\\Exception\\\\(ConnectionException|DriverException)",
      "type": "DBALException",
      "description": "Database connection or query error",
      "root_cause": "symfony_database_error",
      "suggestion": "Check database connection parameters. Verify SQL syntax in queries. Ensure database schema is up to date with migrations.",
      "confidence": "high",
      "severity": "high",
      "category": "database",
      "framework": "symfony"
    },
    {
      "id": "symfony_security_exception",
      "pattern": "Symfony\\\\Component\\\\Security\\\\Core\\\\Exception\\\\(AccessDeniedException|AuthenticationException)",
      "type": "SecurityException",
      "description": "Security-related error (authentication or authorization)",
      "root_cause": "symfony_security_error",
      "suggestion": "Check security configuration. Ensure proper firewall and access control settings. Verify user roles and permissions match security requirements.",
      "confidence": "high",
      "severity": "high",
      "category": "security",
      "framework": "symfony"
    },
    {
      "id": "symfony_environment_error",
      "pattern": "RuntimeException: Environment variable not found: \"([^\"]+)\"",
      "type": "RuntimeException",
      "description": "Missing environment variable",
      "root_cause": "symfony_environment_error",
      "suggestion": "Ensure the required environment variable is set in .env or server configuration. Check for typos in variable names.",
      "confidence": "high",
      "severity": "high",
      "category": "configuration",
      "framework": "symfony"
    },
    {
      "id": "symfony_parameter_error",
      "pattern": "Symfony\\\\Component\\\\DependencyInjection\\\\Exception\\\\ParameterNotFoundException.*You have requested a non-existent parameter \"([^\"]+)\"",
      "type": "ParameterNotFoundException",
      "description": "Attempted to access a non-existent container parameter",
      "root_cause": "symfony_parameter_not_found",
      "suggestion": "Check parameter name for typos. Ensure the parameter is defined in services.yaml or parameters.yaml.",
      "confidence": "high",
      "severity": "medium",
      "category": "dependency-injection",
      "framework": "symfony"
    },
    {
      "id": "symfony_cache_error",
      "pattern": "Symfony\\\\Component\\\\Cache\\\\Exception\\\\CacheException",
      "type": "CacheException",
      "description": "Error with cache system",
      "root_cause": "symfony_cache_error",
      "suggestion": "Check cache configuration. Ensure cache directories are writable. Verify Redis or Memcached connection settings if used.",
      "confidence": "high",
      "severity": "medium",
      "category": "cache",
      "framework": "symfony"
    },
    {
      "id": "symfony_messenger_error",
      "pattern": "Symfony\\\\Component\\\\Messenger\\\\Exception\\\\(TransportException|HandlerFailedException)",
      "type": "MessengerException",
      "description": "Error with message queue or handler",
      "root_cause": "symfony_messenger_error",
      "suggestion": "Check messenger configuration. Verify transport and handler settings. Ensure message serialization is working correctly.",
      "confidence": "high",
      "severity": "high",
      "category": "messenger",
      "framework": "symfony"
    }
  ]
}