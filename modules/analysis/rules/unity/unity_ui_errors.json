{
  "name": "Unity UI (uGUI) Errors",
  "description": "Rules for detecting and fixing Unity UI system specific errors",
  "version": "1.0.0",
  "rules": [
    {
      "id": "unity_ui_canvas_null_reference",
      "pattern": "Canvas.*null.*reference.*|GetComponentInParent.*Canvas.*null.*",
      "type": "System.NullReferenceException",
      "description": "UI element not under a Canvas component",
      "root_cause": "unity_ui_canvas_null_reference",
      "suggestion": "Ensure UI elements are children of a GameObject with Canvas component. Check Canvas component is properly configured.",
      "confidence": "high",
      "severity": "medium",
      "category": "canvas",
      "framework": "unity",
      "tags": ["unity", "ui", "canvas", "null-reference"]
    },
    {
      "id": "unity_ui_raycast_target_performance",
      "pattern": "UI.*raycast.*performance.*|Too.*many.*raycast.*targets.*UI.*",
      "type": "PerformanceWarning",
      "description": "Too many UI elements with Raycast Target enabled",
      "root_cause": "unity_ui_raycast_performance",
      "suggestion": "Disable 'Raycast Target' on UI elements that don't need interaction (images, text). Use GraphicRaycaster settings to optimize.",
      "confidence": "medium",
      "severity": "medium",
      "category": "performance",
      "framework": "unity",
      "tags": ["unity", "ui", "raycast", "performance"]
    },
    {
      "id": "unity_ui_text_component_null",
      "pattern": "Text.*component.*null.*UI.*|GetComponent.*Text.*null.*",
      "type": "System.NullReferenceException",
      "description": "Text component reference is null",
      "root_cause": "unity_ui_text_null",
      "suggestion": "Ensure GameObject has Text component attached. Use GetComponent<Text>() with null checks or assign reference in Inspector.",
      "confidence": "high",
      "severity": "medium",
      "category": "text",
      "framework": "unity",
      "tags": ["unity", "ui", "text", "components"]
    },
    {
      "id": "unity_ui_button_onclick_null",
      "pattern": "Button.*onClick.*null.*|Button.*event.*not.*assigned.*",
      "type": "System.NullReferenceException",
      "description": "Button onClick event not assigned or null",
      "root_cause": "unity_ui_button_onclick_null",
      "suggestion": "Assign onClick event in Inspector or via script using button.onClick.AddListener(). Check if button reference is valid.",
      "confidence": "high",
      "severity": "medium",
      "category": "button",
      "framework": "unity",
      "tags": ["unity", "ui", "button", "events"]
    },
    {
      "id": "unity_ui_image_sprite_null",
      "pattern": "Image.*sprite.*null.*|Image.*component.*sprite.*not.*assigned.*",
      "type": "System.NullReferenceException",
      "description": "Image component has null sprite assigned",
      "root_cause": "unity_ui_image_sprite_null",
      "suggestion": "Assign sprite to Image component in Inspector or via script. Check if sprite is loaded properly before assignment.",
      "confidence": "high",
      "severity": "low",
      "category": "image",
      "framework": "unity",
      "tags": ["unity", "ui", "image", "sprite"]
    },
    {
      "id": "unity_ui_scrollrect_content_null",
      "pattern": "ScrollRect.*content.*null.*|ScrollRect.*viewport.*null.*",
      "type": "System.NullReferenceException",
      "description": "ScrollRect content or viewport not properly assigned",
      "root_cause": "unity_ui_scrollrect_null",
      "suggestion": "Assign Content and Viewport transforms to ScrollRect component. Ensure proper UI hierarchy for scrolling.",
      "confidence": "high",
      "severity": "medium",
      "category": "scrollrect",
      "framework": "unity",
      "tags": ["unity", "ui", "scrollrect", "viewport"]
    },
    {
      "id": "unity_ui_layout_group_performance",
      "pattern": "Layout.*Group.*performance.*|Content.*Size.*Fitter.*expensive.*",
      "type": "PerformanceWarning",
      "description": "Layout Groups causing performance issues with frequent updates",
      "root_cause": "unity_ui_layout_performance",
      "suggestion": "Minimize nested Layout Groups. Use Layout Element instead of Content Size Fitter when possible. Consider manual layout for complex UIs.",
      "confidence": "medium",
      "severity": "medium",
      "category": "layout",
      "framework": "unity",
      "tags": ["unity", "ui", "layout", "performance"]
    },
    {
      "id": "unity_ui_canvas_scaler_reference_resolution",
      "pattern": "Canvas.*Scaler.*reference.*resolution.*incorrect.*|UI.*scaling.*not.*working.*",
      "type": "UILayoutException",
      "description": "Canvas Scaler reference resolution not set correctly",
      "root_cause": "unity_ui_canvas_scaler_resolution",
      "suggestion": "Set appropriate reference resolution in Canvas Scaler. Use 'Scale With Screen Size' mode for multi-resolution support.",
      "confidence": "medium",
      "severity": "low",
      "category": "canvas_scaler",
      "framework": "unity",
      "tags": ["unity", "ui", "canvas-scaler", "resolution"]
    },
    {
      "id": "unity_ui_dropdown_options_empty",
      "pattern": "Dropdown.*options.*empty.*|Dropdown.*list.*no.*items.*",
      "type": "System.InvalidOperationException",
      "description": "Dropdown component has no options assigned",
      "root_cause": "unity_ui_dropdown_empty",
      "suggestion": "Add options to Dropdown component via Inspector or script using dropdown.options.Add(). Initialize options in Start().",
      "confidence": "high",
      "severity": "low",
      "category": "dropdown",
      "framework": "unity",
      "tags": ["unity", "ui", "dropdown", "options"]
    },
    {
      "id": "unity_ui_input_field_validation",
      "pattern": "InputField.*validation.*failed.*|InputField.*character.*limit.*exceeded.*",
      "type": "System.ArgumentException",
      "description": "InputField validation or character limit issues",
      "root_cause": "unity_ui_input_field_validation",
      "suggestion": "Configure InputField validation settings properly. Set character limit and input type as needed. Handle OnValueChanged events.",
      "confidence": "medium",
      "severity": "low",
      "category": "input_field",
      "framework": "unity",
      "tags": ["unity", "ui", "input-field", "validation"]
    },
    {
      "id": "unity_ui_toggle_group_no_selection",
      "pattern": "Toggle.*Group.*no.*toggle.*selected.*|ToggleGroup.*allowSwitchOff.*false.*",
      "type": "System.InvalidOperationException",
      "description": "ToggleGroup has no toggle selected when allowSwitchOff is false",
      "root_cause": "unity_ui_toggle_group_selection",
      "suggestion": "Set one toggle as default selected in ToggleGroup, or enable 'Allow Switch Off' if no selection is acceptable.",
      "confidence": "medium",
      "severity": "low",
      "category": "toggle_group",
      "framework": "unity",
      "tags": ["unity", "ui", "toggle", "group"]
    },
    {
      "id": "unity_ui_slider_handle_rect_null",
      "pattern": "Slider.*handle.*rect.*null.*|Slider.*Handle.*Slide.*Area.*not.*assigned.*",
      "type": "System.NullReferenceException",
      "description": "Slider component handle or slide area not properly assigned",
      "root_cause": "unity_ui_slider_handle_null",
      "suggestion": "Assign Handle Slide Area and Handle in Slider component. Ensure proper UI hierarchy for slider functionality.",
      "confidence": "high",
      "severity": "medium",
      "category": "slider",
      "framework": "unity",
      "tags": ["unity", "ui", "slider", "handle"]
    },
    {
      "id": "unity_ui_mask_performance",
      "pattern": "Mask.*component.*performance.*|UI.*Mask.*expensive.*overdraw.*",
      "type": "PerformanceWarning",
      "description": "UI Mask component causing performance issues",
      "root_cause": "unity_ui_mask_performance",
      "suggestion": "Use RectMask2D instead of Mask when possible. Minimize nested masks and consider alternative clipping methods.",
      "confidence": "medium",
      "severity": "medium",
      "category": "mask",
      "framework": "unity",
      "tags": ["unity", "ui", "mask", "performance"]
    },
    {
      "id": "unity_ui_graphic_raycaster_camera_null",
      "pattern": "GraphicRaycaster.*camera.*null.*|UI.*camera.*not.*assigned.*WorldSpace.*",
      "type": "System.NullReferenceException",
      "description": "GraphicRaycaster camera not assigned for World Space Canvas",
      "root_cause": "unity_ui_graphic_raycaster_camera",
      "suggestion": "Assign Event Camera to Canvas component when using World Space render mode. Use Camera.main or specific camera reference.",
      "confidence": "high",
      "severity": "medium",
      "category": "raycaster",
      "framework": "unity",
      "tags": ["unity", "ui", "raycaster", "camera"]
    },
    {
      "id": "unity_ui_content_size_fitter_infinite_loop",
      "pattern": "Content.*Size.*Fitter.*infinite.*loop.*|Layout.*infinite.*calculation.*",
      "type": "System.StackOverflowException",
      "description": "Content Size Fitter causing infinite layout calculations",
      "root_cause": "unity_ui_content_size_fitter_loop",
      "suggestion": "Avoid circular dependencies in Content Size Fitter. Don't use both horizontal and vertical fit on parent-child layout elements.",
      "confidence": "medium",
      "severity": "high",
      "category": "content_size_fitter",
      "framework": "unity",
      "tags": ["unity", "ui", "layout", "infinite-loop"]
    }
  ]
}